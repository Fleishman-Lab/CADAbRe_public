<ROSETTASCRIPTS>
    <SCOREFXNS>
        <ScoreFunction name="scorefxn_full" weights="ref2015">
            <Reweight scoretype="coordinate_constraint" weight="0.6"/>
    	</ScoreFunction>
        <ScoreFunction name="soft_rep_full" weights="ref2015_soft">
            <Reweight scoretype="coordinate_constraint" weight="0.6"/>	
            <Reweight scoretype="res_type_constraint" weight="0.1"/>	
        </ScoreFunction>                                                      	
    </SCOREFXNS>	
    
    <TASKOPERATIONS>
        <RestrictToRepacking name="rtr"/>
        <OperateOnResidueSubset name="fix_not_neighbor">
            <Not>
            <Neighborhood distance="8">
                    <Index resnums="%%all_ress%%"/>
            </Neighborhood>
            </Not>
            <PreventRepackingRLT/>
        </OperateOnResidueSubset>
        <InitializeFromCommandline name="init"/>
        <IncludeCurrent name="include_curr"/>
    </TASKOPERATIONS>
    
    <MOVERS>
		<MutateResidue name="mutres0" new_res="%%new_res0%%" target="%%target0%%" preserve_atom_coords="%%pac0%%"/>
		<MutateResidue name="mutres1" new_res="%%new_res1%%" target="%%target1%%" preserve_atom_coords="%%pac1%%"/>
		<MutateResidue name="mutres2" new_res="%%new_res2%%" target="%%target2%%" preserve_atom_coords="%%pac2%%"/>
		<MutateResidue name="mutres3" new_res="%%new_res3%%" target="%%target3%%" preserve_atom_coords="%%pac3%%"/>
		<MutateResidue name="mutres4" new_res="%%new_res4%%" target="%%target4%%" preserve_atom_coords="%%pac4%%"/>
		<MutateResidue name="mutres5" new_res="%%new_res5%%" target="%%target5%%" preserve_atom_coords="%%pac5%%"/>
		<MutateResidue name="mutres6" new_res="%%new_res6%%" target="%%target6%%" preserve_atom_coords="%%pac6%%"/>
		<MutateResidue name="mutres7" new_res="%%new_res7%%" target="%%target7%%" preserve_atom_coords="%%pac7%%"/>
		<MutateResidue name="mutres8" new_res="%%new_res8%%" target="%%target8%%" preserve_atom_coords="%%pac8%%"/>
		<MutateResidue name="mutres9" new_res="%%new_res9%%" target="%%target9%%" preserve_atom_coords="%%pac9%%"/>
		<MutateResidue name="mutres10" new_res="%%new_res10%%" target="%%target10%%" preserve_atom_coords="%%pac10%%"/>
		<MutateResidue name="mutres11" new_res="%%new_res11%%" target="%%target11%%" preserve_atom_coords="%%pac11%%"/>
		<MutateResidue name="mutres12" new_res="%%new_res12%%" target="%%target12%%" preserve_atom_coords="%%pac12%%"/>
        <ConstraintSetMover name="add_CA_cst" cst_file="%%cst_full_path%%"/>	        
        <AtomTree name="tree" docking_ft="1"/>
        <PackRotamersMover name="prm" task_operations="init,include_curr,rtr,fix_not_neighbor" scorefxn="scorefxn_full"/> 
        <RotamerTrialsMinMover name="rtmin" task_operations="init,include_curr,rtr,fix_not_neighbor" scorefxn="scorefxn_full"/>
        <MinMover name="min" bb="1" chi="1" jump="ALL" scorefxn="scorefxn_full"/>
        <PackRotamersMover name="soft_repack" scorefxn="soft_rep_full" task_operations="init,include_curr,rtr,fix_not_neighbor"/>
    </MOVERS>

    <FILTERS>
        <DesignableResidues name="designable" task_operations="fix_not_neighbor" designable="0" packable="1"/>
    </FILTERS>
    
    <PROTOCOLS>
        <Add mover_name="tree"/>
        <Add mover="add_CA_cst"/>
		<Add mover="mutres0"/>
		<Add mover="mutres1"/>
		<Add mover="mutres2"/>
		<Add mover="mutres3"/>
		<Add mover="mutres4"/>
		<Add mover="mutres5"/>
		<Add mover="mutres6"/>
		<Add mover="mutres7"/>
		<Add mover="mutres8"/>
		<Add mover="mutres9"/>
		<Add mover="mutres10"/>
		<Add mover="mutres11"/>
		<Add mover="mutres12"/>
        <Add mover="soft_repack"/>
        <Add mover="min"/>
        <Add mover="prm"/>
        <Add mover="min"/>
        <Add filter="designable"/>
    </PROTOCOLS>
    <OUTPUT scorefxn="scorefxn_full"/>
</ROSETTASCRIPTS>
